{"ast":null,"code":"var _jsxFileName = \"/Users/jatinkumar/Downloads/BonsaiChat/src/ChatSection.js\";\nimport React, { useEffect, useState, useContext } from 'react';\nimport './App.css';\nimport ChatBot from 'react-simple-chatbot';\nimport { ThemeProvider } from 'styled-components';\nimport ChatBanner from './ChatBanner';\nimport InfoIcon from '@material-ui/icons/Info';\nimport { ArrowForwardIos, AttachFileTwoTone, EmojiEmotionsTwoTone, FreeBreakfastOutlined, Info } from '@material-ui/icons';\nimport { Button, Container, IconButton, Input, InputBase, Paper, Typography } from '@material-ui/core';\nimport { RemoveScrollBar } from 'react-remove-scroll-bar';\nimport { connect, useDispatch } from 'react-redux';\nimport { FirebaseContext } from \"./firebase/firebase\";\nimport { Widget, addResponseMessage, toggleWidget, dropMessages, addUserMessage, renderCustomComponent } from 'react-chat-widget';\nimport './Chat.css';\nimport Utility from './Utility';\nvar stateData;\nvar chatID;\nvar m = \"place\";\nvar pointer = 0;\nvar triggerN = \"\";\nvar message = \"\";\nvar showing = false;\nconst theme = {\n  background: '#f5f8fb',\n  fontFamily: 'Helvetica Neue',\n  headerBgColor: '#000000',\n  headerFontColor: '#fff',\n  headerFontSize: '15px',\n  botBubbleColor: '#EF6C00',\n  botFontColor: '#fff',\n  userBubbleColor: '#fff',\n  userFontColor: '#4a4a4a'\n};\n\nfunction loopThru(props) {\n  chatID = props.id;\n  console.log(\"lebron\", props, pointer);\n\n  if (props.data[chatID] && pointer < props.data[chatID].length) {\n    if (props.data[chatID][pointer].sender == \"user\") {\n      addUserMessage(props.data[chatID][pointer].data, pointer);\n    } else {\n      addResponseMessage(props.data[chatID][pointer].data, pointer);\n    }\n\n    pointer++;\n    loopThru(props);\n    console.log(\"pointer: \", pointer);\n  }\n\n  return;\n}\n\nfunction validateEmail(email) {\n  const re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  return re.test(email);\n} //return 0 for ok email\n\n\nfunction validate(email) {\n  if (validateEmail(email)) {\n    return true;\n  } else {\n    return false;\n  }\n\n  return false;\n}\n\nvar email = \"\";\nvar name = \"\";\n\nfunction ChatSection(props) {\n  if (!showing) {\n    toggleWidget();\n    showing = true;\n  }\n\n  const {\n    app,\n    api\n  } = useContext(FirebaseContext);\n  const dispatch = useDispatch();\n  const [email2, setEmail] = useState(\"\");\n  const [name2, setName] = useState(\"\");\n\n  const inputChange = event => {\n    //setInput(event.target.value)\n    message = event.target.value;\n  };\n\n  const handleSend = () => {\n    if (message == \"\") {\n      return;\n    }\n\n    addUserMessage(message);\n    api.addMessage(pointer, chatID, message);\n    message = \"\";\n  };\n\n  const handleNewUserMessage = newMessage => {\n    console.log(`New message incoming! ${newMessage}`); // Now send the message throught the backend API\n  };\n\n  const handleChangeEmail = event => {\n    console.log(\"EVENTLOG: \", event.target.value);\n    email = event.target.value;\n  };\n\n  const handleEmailSubmit = () => {\n    console.log(\"submit pressed\");\n\n    if (validate(email)) {\n      console.log(\"email validated\");\n      api.setMetaData(props.id, {\n        email: email\n      });\n      setEmail(email);\n    }\n  };\n\n  const handleChangeName = event => {\n    //console.log(\"EVENTLOG: \", event.target.value)\n    name = event.target.value;\n  };\n\n  const handleNameSubmit = () => {\n    api.setMetaData(props.id, {\n      name: name\n    });\n    setName(name);\n    message = \"Howdy \";\n    handleSend();\n    addResponseMessage(\"Howdy \" + name);\n    renderCustomComponent(Button2);\n  };\n\n  const Button2 = ({}) => /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '80%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Utility, {\n    color: props.data.themeColor,\n    style: {\n      backgroundColor: props.data.themeColor\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    component: \"form\",\n    style: {\n      boxShadow: \"0px 0px 1px #9999\",\n      width: '100%',\n      borderTopRightRadius: 0,\n      borderBottomRightRadius: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Enter Email\",\n    inputProps: {\n      'aria-label': 'search google maps'\n    },\n    disableUnderline: true,\n    onChange: handleChangeEmail,\n    style: {\n      paddingLeft: 10,\n      width: '100%',\n      textAnchor: 'middle',\n      alignItems: 'center',\n      textAlign: 'center',\n      paddingTop: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(IconButton, {\n    onClick: handleEmailSubmit,\n    style: {\n      height: '100%',\n      backgroundColor: props.data.themeColor,\n      height: 40,\n      width: 40,\n      borderRadius: 0,\n      borderTopRightRadius: 5,\n      borderBottomRightRadius: 5\n    },\n    type: \"submit\",\n    \"aria-label\": \"search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(ArrowForwardIos, {\n    style: {\n      color: 'white',\n      margin: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 23\n    }\n  })))));\n\n  const Name = ({}) => /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '80%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Utility, {\n    color: props.data.themeColor,\n    style: {\n      backgroundColor: props.data.themeColor\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    component: \"form\",\n    style: {\n      boxShadow: \"0px 0px 1px #9999\",\n      width: '100%',\n      borderTopRightRadius: 0,\n      borderBottomRightRadius: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Full Name\",\n    inputProps: {\n      'aria-label': 'search google maps'\n    },\n    disableUnderline: true,\n    onChange: handleChangeName,\n    style: {\n      paddingLeft: 10,\n      width: '100%',\n      textAnchor: 'middle',\n      alignItems: 'center',\n      textAlign: 'center',\n      paddingTop: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(IconButton, {\n    onClick: handleNameSubmit,\n    style: {\n      height: '100%',\n      backgroundColor: props.data.themeColor,\n      height: 40,\n      width: 40,\n      borderRadius: 0,\n      borderTopRightRadius: 5,\n      borderBottomRightRadius: 5\n    },\n    type: \"submit\",\n    \"aria-label\": \"search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(ArrowForwardIos, {\n    style: {\n      color: 'white',\n      margin: 'auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 19\n    }\n  })))));\n\n  stateData = props.data;\n  dropMessages();\n  pointer = 0;\n  console.log(\"PropsCC: \", props);\n\n  if (!props.data.sessionMeta.name && !props.data.sessionMeta.email) {\n    addResponseMessage(\"Hi! What's your name?\");\n    renderCustomComponent(Name);\n  } else if (props.data.sessionMeta.name && !props.data.sessionMeta.email) {\n    addResponseMessage(\"Howdy \" + props.data.sessionMeta.name + \"! What's your email?\");\n    renderCustomComponent(Button2);\n  } else {\n    loopThru(props);\n  }\n\n  toggleWidget();\n  return /*#__PURE__*/React.createElement(ThemeProvider, {\n    theme: theme,\n    style: {\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '100%',\n      overflowY: 'scroll',\n      height: 400\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Widget, {\n    handleNewUserMessage: handleNewUserMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Container, {\n    style: {\n      backgroundColor: 'white',\n      bottom: 0,\n      width: \"100%\",\n      padding: 10,\n      position: 'absolute'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    className: \"shadow\",\n    style: {\n      backgroundColor: 'white',\n      borderRadius: 8,\n      padding: 10,\n      boxShadow: '0 0px 10px 0 rgba(0, 0, 0, .2)'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      alignItems: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    id: \"userInput\",\n    onChange: inputChange,\n    onSubmit: handleSend,\n    placeholder: \"Send a message...\",\n    disableUnderline: \"true\",\n    multiline: true,\n    style: {\n      fontSize: 12,\n      textAlign: \"left\"\n    },\n    fullWidth: \"true\",\n    inputProps: {\n      'aria-label': 'description',\n      disableUnderline: true\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    onSubmit: handleSend,\n    onClick: handleSend,\n    style: {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 19\n    }\n  }, \"Send\")))));\n} //Recieve data from state\n\n\nconst mapStateToProps = (state, ownProps) => {\n  //let id = ownProps.match.params.post_id;\n  return {\n    data: state\n  };\n}; //To Send actions to state\n\n\nconst mapDispatchToProps = dispatch => {\n  return {//deletePost: (id) => dispatch(deletePost(id))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ChatSection);","map":{"version":3,"sources":["/Users/jatinkumar/Downloads/BonsaiChat/src/ChatSection.js"],"names":["React","useEffect","useState","useContext","ChatBot","ThemeProvider","ChatBanner","InfoIcon","ArrowForwardIos","AttachFileTwoTone","EmojiEmotionsTwoTone","FreeBreakfastOutlined","Info","Button","Container","IconButton","Input","InputBase","Paper","Typography","RemoveScrollBar","connect","useDispatch","FirebaseContext","Widget","addResponseMessage","toggleWidget","dropMessages","addUserMessage","renderCustomComponent","Utility","stateData","chatID","m","pointer","triggerN","message","showing","theme","background","fontFamily","headerBgColor","headerFontColor","headerFontSize","botBubbleColor","botFontColor","userBubbleColor","userFontColor","loopThru","props","id","console","log","data","length","sender","validateEmail","email","re","test","validate","name","ChatSection","app","api","dispatch","email2","setEmail","name2","setName","inputChange","event","target","value","handleSend","addMessage","handleNewUserMessage","newMessage","handleChangeEmail","handleEmailSubmit","setMetaData","handleChangeName","handleNameSubmit","Button2","width","themeColor","backgroundColor","display","boxShadow","borderTopRightRadius","borderBottomRightRadius","paddingLeft","textAnchor","alignItems","textAlign","paddingTop","height","borderRadius","color","margin","Name","sessionMeta","overflowY","bottom","padding","position","fontSize","disableUnderline","mapStateToProps","state","ownProps","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, {useEffect, useState, useContext}from 'react';\nimport './App.css';\nimport ChatBot from 'react-simple-chatbot';\nimport { ThemeProvider } from 'styled-components';\nimport ChatBanner from './ChatBanner';\nimport InfoIcon from '@material-ui/icons/Info';\nimport { ArrowForwardIos, AttachFileTwoTone, EmojiEmotionsTwoTone, FreeBreakfastOutlined, Info } from '@material-ui/icons';\nimport { Button, Container, IconButton, Input, InputBase, Paper, Typography } from '@material-ui/core';\nimport {RemoveScrollBar} from 'react-remove-scroll-bar';\nimport { connect, useDispatch } from 'react-redux'\n\nimport { FirebaseContext } from \"./firebase/firebase\";\n\nimport { Widget, addResponseMessage, toggleWidget, dropMessages, addUserMessage, renderCustomComponent } from 'react-chat-widget';\nimport './Chat.css'; \nimport Utility from './Utility';\n\nvar stateData;\nvar chatID;\nvar m = \"place\";\nvar pointer = 0;\nvar triggerN = \"\"\n\nvar message = \"\";\n\nvar showing = false;\n\n\nconst theme = {\n    background: '#f5f8fb',\n    fontFamily: 'Helvetica Neue',\n    headerBgColor: '#000000',\n    headerFontColor: '#fff',\n    headerFontSize: '15px',\n    botBubbleColor: '#EF6C00',\n    botFontColor: '#fff',\n    userBubbleColor: '#fff',\n    userFontColor: '#4a4a4a',\n  };\n\nfunction loopThru(props){\n  chatID = props.id;\n  console.log(\"lebron\", props, pointer);\n  if(props.data[chatID] && pointer < props.data[chatID].length){\n    if(props.data[chatID][pointer].sender == \"user\"){\n      addUserMessage(props.data[chatID][pointer].data, pointer)\n    } else{\n      addResponseMessage(props.data[chatID][pointer].data, pointer)\n    }\n    pointer++\n    loopThru(props)\n    console.log(\"pointer: \", pointer)\n  }\n  return;\n}\n\nfunction validateEmail(email) {\n  const re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  return re.test(email);\n}\n\n//return 0 for ok email\nfunction validate(email) {\n\n  if (validateEmail(email)) {\n    return true\n  } else {\n    return false\n  }\n  return false;\n}\n\nvar email = \"\";\nvar name = \"\";\n\nfunction ChatSection(props){\n\n  if(!showing){\n    toggleWidget();\n    showing = true;\n  }\n\n  const { app, api } = useContext(FirebaseContext);\n  const dispatch = useDispatch();\n\n  const [email2, setEmail] = useState(\"\");\n\n  const [name2, setName] = useState(\"\");\n\n  const inputChange = (event) => {\n    //setInput(event.target.value)\n    message = event.target.value;\n  };\n\n  const handleSend = () => {\n    if(message == \"\"){return} \n    addUserMessage(message);\n    api.addMessage(pointer, chatID, message)\n    message = \"\";\n  };\n  \n  const handleNewUserMessage = (newMessage) => {\n    console.log(`New message incoming! ${newMessage}`);\n    // Now send the message throught the backend API\n  };\n\n  const handleChangeEmail = (event) => {\n    console.log(\"EVENTLOG: \", event.target.value)\n    email = event.target.value;\n  }\n\n  const handleEmailSubmit = () => {\n    console.log(\"submit pressed\");\n    if(validate(email)){\n      console.log(\"email validated\");\n      api.setMetaData(props.id, {email: email});\n      setEmail(email)\n    }\n  }\n\n  const handleChangeName = (event) => {\n    //console.log(\"EVENTLOG: \", event.target.value)\n    name = event.target.value;\n  }\n\n  const handleNameSubmit = () => {\n      api.setMetaData(props.id, {name: name});\n      setName(name);\n      message = \"Howdy \";\n      handleSend();\n      addResponseMessage(\"Howdy \" + name)\n      renderCustomComponent(Button2)\n  }\n\n\n\n  const Button2 = ({ }) => \n    <div style={{width:'80%',}}>\n      <Utility color={props.data.themeColor} style={{backgroundColor: props.data.themeColor}} >\n      {/* <Typography variant={\"subtitle1\"} style={{color:\"black\", paddingBottom:10}}><b>Stay in touch</b></Typography> */}\n                <div style={{display:'flex'}}>\n                  <Paper component=\"form\" style={{ boxShadow: \"0px 0px 1px #9999\", width:'100%', borderTopRightRadius:0, borderBottomRightRadius:0}}>\n                    <Input\n                      placeholder=\"Enter Email\"\n                      inputProps={{ 'aria-label': 'search google maps' }}\n                      disableUnderline={true}\n                      onChange={handleChangeEmail}\n                      style={{paddingLeft:10, width:'100%', textAnchor:'middle', alignItems:'center', textAlign:'center', paddingTop:5}}\n                    />\n                  </Paper>\n\n                  <IconButton onClick={handleEmailSubmit} style={{height:'100%', backgroundColor:props.data.themeColor, height:40, width:40, borderRadius:0, borderTopRightRadius:5, borderBottomRightRadius:5}} type=\"submit\" aria-label=\"search\">\n                      <ArrowForwardIos style={{color:'white', margin:'auto'}}/>\n                  </IconButton>\n                </div>\n      </Utility>\n    </div>\n\nconst Name = ({ }) =>\n  <div style={{width:'80%'}}>\n  <Utility color={props.data.themeColor} style={{backgroundColor: props.data.themeColor}} >\n  {/* <Typography variant={\"subtitle1\"} style={{color:\"black\", paddingBottom:10}}><b>Stay in touch</b></Typography> */}\n            <div style={{display:'flex'}}>\n              <Paper component=\"form\" style={{ boxShadow: \"0px 0px 1px #9999\", width:'100%', borderTopRightRadius:0, borderBottomRightRadius:0}}>\n                <Input\n                  placeholder=\"Full Name\"\n                  inputProps={{ 'aria-label': 'search google maps' }}\n                  disableUnderline={true}\n                  onChange={handleChangeName}\n                  style={{paddingLeft:10, width:'100%', textAnchor:'middle', alignItems:'center', textAlign:'center', paddingTop:5}}\n                />\n              </Paper>\n\n              <IconButton onClick={handleNameSubmit} style={{height:'100%', backgroundColor:props.data.themeColor, height:40, width:40, borderRadius:0, borderTopRightRadius:5, borderBottomRightRadius:5}} type=\"submit\" aria-label=\"search\">\n                  <ArrowForwardIos style={{color:'white', margin:'auto'}}/>\n              </IconButton>\n            </div>\n  </Utility>\n</div>\n\n\n  stateData = props.data;\n  dropMessages()\n  pointer = 0;\n  console.log(\"PropsCC: \", props)\n  if(!props.data.sessionMeta.name && !props.data.sessionMeta.email){\n    addResponseMessage(\"Hi! What's your name?\")\n    renderCustomComponent(Name)\n  } else if(props.data.sessionMeta.name && !props.data.sessionMeta.email){\n    addResponseMessage(\"Howdy \" + props.data.sessionMeta.name + \"! What's your email?\")\n    renderCustomComponent(Button2)\n  } else {\n    loopThru(props);\n  }\n  \n  \n\n  toggleWidget()\n    return(\n      <ThemeProvider theme={theme} style={{width:'100%'}}>\n          <div style={{width:'100%', overflowY:'scroll', height: 400}}>\n            <Widget\n              handleNewUserMessage={handleNewUserMessage}\n            />\n          </div>\n          <Container style={{ backgroundColor: 'white', bottom:0, width:\"100%\", padding:10, position: 'absolute', }}>\n              <Container className=\"shadow\" style={{backgroundColor: 'white', borderRadius: 8, padding: 10, boxShadow: '0 0px 10px 0 rgba(0, 0, 0, .2)'}}>\n                <div style={{display:'flex', alignItems:'center', }}>\n                <Input id={\"userInput\"} onChange={inputChange} onSubmit={handleSend} placeholder=\"Send a message...\" disableUnderline='true' multiline={true} style={{fontSize: 12, textAlign: \"left\"}} fullWidth=\"true\" inputProps={{ 'aria-label': 'description', disableUnderline: true }} />\n                  {/* <MenuBookTwoTone style={{color: \"#3599FF\", marginRight: 10}}/> */}\n                  {/* <PostAddTwoTone style={{color: \"#3599FF\",  marginRight: 10}}/> */}\n                  {/* <EmojiEmotionsTwoTone style={{color: \"#3599FF\",  marginRight: 10}}/> */}\n                  {/* <Gif style={{color: \"#3599FF\",  marginRight: 10}}/> */}\n                  {/* <InsertPhotoTwoTone style={{color: \"#3599FF\",  marginRight: 10}}/> */}\n                  {/* <AttachFileTwoTone style={{color: \"#3599FF\"}}/> */}\n                  <Button variant=\"primary\" onSubmit={handleSend} onClick={handleSend} style={{}}>Send</Button>\n                </div>\n              </Container>\n          </Container>\n      </ThemeProvider>\n  )\n  \n}\n\n//Recieve data from state\nconst mapStateToProps = (state, ownProps) => {\n  //let id = ownProps.match.params.post_id;\n  \n  return {\n    data: state\n  }\n}\n\n//To Send actions to state\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    //deletePost: (id) => dispatch(deletePost(id))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ChatSection);\n"]},"metadata":{},"sourceType":"module"}