{"ast":null,"code":"var _jsxFileName = \"/Users/pritivirajkumar/Downloads/BonsaiChat/src/Chat.js\";\nimport React, { useEffect, useState } from 'react';\nimport './App.css';\nimport ChatBot from 'react-simple-chatbot';\nimport { ThemeProvider } from 'styled-components';\nimport ChatBanner from './ChatBanner';\nimport InfoIcon from '@material-ui/icons/Info';\nimport { FreeBreakfastOutlined, Info } from '@material-ui/icons';\nimport { Typography } from '@material-ui/core';\nimport styles from './Chat.css';\nimport { RemoveScrollBar } from 'react-remove-scroll-bar';\nimport firebase from 'firebase';\nconst COMPANY_NAME = \"Branch\";\nvar name = \"\";\nvar agentID;\nvar db;\n\nfunction Retrival(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 11\n    }\n  }, \"asdf\");\n}\n\nfunction Connecting(props) {\n  const [working, setWorking] = useState(false);\n  const [assignedAgentID, setAssignedAgentID] = useState('');\n  useEffect(() => {\n    db = firebase.firestore();\n    const {\n      steps\n    } = props;\n    const name = steps.name.value; //Assign a random agent to this person\n\n    console.log(name);\n    db.collection('companies').doc(COMPANY_NAME).collection('agents').get().then(function (querySnapshot) {\n      var agentIDs = [];\n      var agents = [];\n      querySnapshot.forEach(function (doc) {\n        // doc.data() is never undefined for query doc snapshots\n        console.log(doc.id, \" => \", doc.data());\n        agentIDs.push(doc.id);\n        agents.push(doc.data());\n      }); //Loop through agents and find the first online\n\n      for (var i = 0; i < agents.length; i++) {\n        console.log(agents[i][\"online\"]);\n        console.log(agentIDs[i]);\n\n        if (agents[i][\"online\"]) {\n          //Select this agent and assign them to this person\n          setAssignedAgentID(agentIDs[i]);\n          agentID = agentIDs[i];\n          break;\n        }\n      }\n\n      props.triggerNextStep({\n        trigger: '7'\n      }); //console.log(\"FOUND AGENT: \" + assignedAgentID)\n    }).catch(function (error) {\n      console.log(\"Error getting documents: \", error);\n    });\n  }, []);\n  setTimeout(function () {\n    console.log(agentID);\n  }, 3000);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  });\n}\n\nconst steps = [{\n  id: '1',\n  message: \"Welcome to \" + COMPANY_NAME + \"!\",\n  trigger: '2'\n}, {\n  id: '2',\n  message: 'Would you like to look at our support articles or speak with an agent?',\n  trigger: '3'\n}, {\n  id: '3',\n  options: [{\n    value: 'Articles',\n    label: 'Articles',\n    trigger: '4'\n  }, {\n    value: 'Agent',\n    label: 'Agent',\n    trigger: '4'\n  }]\n}, {\n  id: '4',\n  message: 'Please enter your full name.',\n  trigger: 'name'\n}, {\n  id: 'name',\n  user: true,\n  trigger: '6'\n}, {\n  id: '6',\n  component: /*#__PURE__*/React.createElement(Connecting, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 16\n    }\n  }),\n  waitAction: true\n}, {\n  id: '7',\n  message: 'You are now connected with an agent.',\n  trigger: 'retrieval'\n}, {\n  id: 'retrieval',\n  component: /*#__PURE__*/React.createElement(Retrival, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 16\n    }\n  }),\n  user: true,\n  waitAction: true\n}];\nconst theme = {\n  background: '#f5f8fb',\n  fontFamily: 'Helvetica Neue',\n  headerBgColor: '#000000',\n  headerFontColor: '#fff',\n  headerFontSize: '15px',\n  botBubbleColor: '#EF6C00',\n  botFontColor: '#fff',\n  userBubbleColor: '#fff',\n  userFontColor: '#4a4a4a'\n};\nvar isScrolling;\nexport default class Chat extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      height: 225,\n      yDiff: 0\n    };\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"scroll\", this.resizeHeaderOnScroll.bind(this));\n  }\n\n  resizeHeaderOnScroll() {\n    const distanceY = window.pageYOffset || document.documentElement.scrollTop;\n    console.log(distanceY);\n\n    if (distanceY >= 85) {\n      this.setState({\n        height: 225 - 70,\n        collapsed: true\n      });\n    } else {\n      this.setState({\n        height: 225 - distanceY,\n        yDiff: distanceY,\n        collapsed: false\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ChatBanner, {\n      id: \"header\",\n      height: this.state.height,\n      style: {\n        backgroundColor: \"black\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(ThemeProvider, {\n      theme: theme,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(ChatBot, {\n      hideHeader: true,\n      steps: steps,\n      customStyle: {\n        backgroundColor: 'transparent',\n        'boxShadow': 'none'\n      },\n      contentStyle: {\n        height: window.innerHeight - this.state.height - 50 + this.state.yDiff\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }\n    })));\n  }\n\n}","map":{"version":3,"sources":["/Users/pritivirajkumar/Downloads/BonsaiChat/src/Chat.js"],"names":["React","useEffect","useState","ChatBot","ThemeProvider","ChatBanner","InfoIcon","FreeBreakfastOutlined","Info","Typography","styles","RemoveScrollBar","firebase","COMPANY_NAME","name","agentID","db","Retrival","props","Connecting","working","setWorking","assignedAgentID","setAssignedAgentID","firestore","steps","value","console","log","collection","doc","get","then","querySnapshot","agentIDs","agents","forEach","id","data","push","i","length","triggerNextStep","trigger","catch","error","setTimeout","message","options","label","user","component","waitAction","theme","background","fontFamily","headerBgColor","headerFontColor","headerFontSize","botBubbleColor","botFontColor","userBubbleColor","userFontColor","isScrolling","Chat","Component","constructor","state","height","yDiff","componentDidMount","window","addEventListener","resizeHeaderOnScroll","bind","distanceY","pageYOffset","document","documentElement","scrollTop","setState","collapsed","render","backgroundColor","innerHeight"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAwC,OAAxC;AACA,OAAO,WAAP;AACA,OAAOC,OAAP,MAAoB,sBAApB;AACA,SAASC,aAAT,QAA8B,mBAA9B;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,SAASC,qBAAT,EAAgCC,IAAhC,QAA4C,oBAA5C;AACA,SAASC,UAAT,QAA2B,mBAA3B;AACA,OAAOC,MAAP,MAAmB,YAAnB;AACA,SAAQC,eAAR,QAA8B,yBAA9B;AACA,OAAOC,QAAP,MAAqB,UAArB;AAEA,MAAMC,YAAY,GAAG,QAArB;AAEA,IAAIC,IAAI,GAAG,EAAX;AAEA,IAAIC,OAAJ;AAEA,IAAIC,EAAJ;;AAEA,SAASC,QAAT,CAAmBC,KAAnB,EAA0B;AACxB,sBAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAR;AACD;;AAED,SAASC,UAAT,CAAqBD,KAArB,EAA4B;AAE1B,QAAM,CAACE,OAAD,EAAUC,UAAV,IAAwBnB,QAAQ,CAAC,KAAD,CAAtC;AAEA,QAAM,CAACoB,eAAD,EAAkBC,kBAAlB,IAAwCrB,QAAQ,CAAC,EAAD,CAAtD;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACde,IAAAA,EAAE,GAAGJ,QAAQ,CAACY,SAAT,EAAL;AACA,UAAM;AAAEC,MAAAA;AAAF,QAAYP,KAAlB;AACA,UAAMJ,IAAI,GAAGW,KAAK,CAACX,IAAN,CAAWY,KAAxB,CAHc,CAId;;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYd,IAAZ;AACAE,IAAAA,EAAE,CAACa,UAAH,CAAc,WAAd,EAA2BC,GAA3B,CAA+BjB,YAA/B,EAA6CgB,UAA7C,CAAwD,QAAxD,EAAkEE,GAAlE,GACCC,IADD,CACM,UAASC,aAAT,EAAwB;AAC1B,UAAIC,QAAQ,GAAG,EAAf;AACA,UAAIC,MAAM,GAAG,EAAb;AACAF,MAAAA,aAAa,CAACG,OAAd,CAAsB,UAASN,GAAT,EAAc;AAChC;AACAH,QAAAA,OAAO,CAACC,GAAR,CAAYE,GAAG,CAACO,EAAhB,EAAoB,MAApB,EAA4BP,GAAG,CAACQ,IAAJ,EAA5B;AACAJ,QAAAA,QAAQ,CAACK,IAAT,CAAcT,GAAG,CAACO,EAAlB;AACAF,QAAAA,MAAM,CAACI,IAAP,CAAYT,GAAG,CAACQ,IAAJ,EAAZ;AACH,OALD,EAH0B,CAU1B;;AACA,WAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,MAAM,CAACM,MAA3B,EAAmCD,CAAC,EAApC,EAAwC;AACtCb,QAAAA,OAAO,CAACC,GAAR,CAAYO,MAAM,CAACK,CAAD,CAAN,CAAU,QAAV,CAAZ;AACAb,QAAAA,OAAO,CAACC,GAAR,CAAYM,QAAQ,CAACM,CAAD,CAApB;;AACA,YAAIL,MAAM,CAACK,CAAD,CAAN,CAAU,QAAV,CAAJ,EAAyB;AACvB;AACAjB,UAAAA,kBAAkB,CAACW,QAAQ,CAACM,CAAD,CAAT,CAAlB;AACAzB,UAAAA,OAAO,GAAGmB,QAAQ,CAACM,CAAD,CAAlB;AACA;AACD;AACF;;AAEDtB,MAAAA,KAAK,CAACwB,eAAN,CAAsB;AAACC,QAAAA,OAAO,EAAE;AAAV,OAAtB,EAtB0B,CAuB1B;AAEH,KA1BD,EA2BCC,KA3BD,CA2BO,UAASC,KAAT,EAAgB;AACnBlB,MAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCiB,KAAzC;AACH,KA7BD;AA+BD,GArCQ,EAqCN,EArCM,CAAT;AAuCAC,EAAAA,UAAU,CAAC,YAAY;AACrBnB,IAAAA,OAAO,CAACC,GAAR,CAAYb,OAAZ;AACD,GAFS,EAEP,IAFO,CAAV;AAIA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF;AAGD;;AAGD,MAAMU,KAAK,GAAG,CACZ;AACEY,EAAAA,EAAE,EAAE,GADN;AAEEU,EAAAA,OAAO,EAAE,gBAAgBlC,YAAhB,GAA+B,GAF1C;AAGE8B,EAAAA,OAAO,EAAE;AAHX,CADY,EAMZ;AACEN,EAAAA,EAAE,EAAE,GADN;AAEEU,EAAAA,OAAO,EAAE,wEAFX;AAGEJ,EAAAA,OAAO,EAAE;AAHX,CANY,EAWZ;AACEN,EAAAA,EAAE,EAAE,GADN;AAEEW,EAAAA,OAAO,EAAE,CACP;AAAEtB,IAAAA,KAAK,EAAE,UAAT;AAAqBuB,IAAAA,KAAK,EAAE,UAA5B;AAAwCN,IAAAA,OAAO,EAAE;AAAjD,GADO,EAEP;AAAEjB,IAAAA,KAAK,EAAE,OAAT;AAAkBuB,IAAAA,KAAK,EAAE,OAAzB;AAAkCN,IAAAA,OAAO,EAAE;AAA3C,GAFO;AAFX,CAXY,EAkBZ;AACEN,EAAAA,EAAE,EAAE,GADN;AAEEU,EAAAA,OAAO,EAAE,8BAFX;AAGEJ,EAAAA,OAAO,EAAE;AAHX,CAlBY,EAuBZ;AACEN,EAAAA,EAAE,EAAE,MADN;AAEEa,EAAAA,IAAI,EAAE,IAFR;AAGEP,EAAAA,OAAO,EAAE;AAHX,CAvBY,EA4BZ;AACEN,EAAAA,EAAE,EAAE,GADN;AAEEc,EAAAA,SAAS,eAAE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFb;AAGEC,EAAAA,UAAU,EAAE;AAHd,CA5BY,EAiCZ;AACEf,EAAAA,EAAE,EAAE,GADN;AAEEU,EAAAA,OAAO,EAAE,sCAFX;AAGEJ,EAAAA,OAAO,EAAE;AAHX,CAjCY,EAsCZ;AACEN,EAAAA,EAAE,EAAE,WADN;AAEEc,EAAAA,SAAS,eAAE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFb;AAGED,EAAAA,IAAI,EAAE,IAHR;AAIEE,EAAAA,UAAU,EAAE;AAJd,CAtCY,CAAd;AAgDA,MAAMC,KAAK,GAAG;AACZC,EAAAA,UAAU,EAAE,SADA;AAEZC,EAAAA,UAAU,EAAE,gBAFA;AAGZC,EAAAA,aAAa,EAAE,SAHH;AAIZC,EAAAA,eAAe,EAAE,MAJL;AAKZC,EAAAA,cAAc,EAAE,MALJ;AAMZC,EAAAA,cAAc,EAAE,SANJ;AAOZC,EAAAA,YAAY,EAAE,MAPF;AAQZC,EAAAA,eAAe,EAAE,MARL;AASZC,EAAAA,aAAa,EAAE;AATH,CAAd;AAYA,IAAIC,WAAJ;AAEA,eAAe,MAAMC,IAAN,SAAmBhE,KAAK,CAACiE,SAAzB,CAAkC;AAC/CC,EAAAA,WAAW,CAAChD,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKiD,KAAL,GAAa;AAACC,MAAAA,MAAM,EAAE,GAAT;AAAcC,MAAAA,KAAK,EAAE;AAArB,KAAb;AACD;;AAEDC,EAAAA,iBAAiB,GAAG;AAClBC,IAAAA,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkC,KAAKC,oBAAL,CAA0BC,IAA1B,CAA+B,IAA/B,CAAlC;AACD;;AAEDD,EAAAA,oBAAoB,GAAG;AAErB,UAAME,SAAS,GAAGJ,MAAM,CAACK,WAAP,IAAsBC,QAAQ,CAACC,eAAT,CAAyBC,SAAjE;AAEApD,IAAAA,OAAO,CAACC,GAAR,CAAY+C,SAAZ;;AACC,QAAIA,SAAS,IAAI,EAAjB,EAAqB;AAClB,WAAKK,QAAL,CAAc;AAACZ,QAAAA,MAAM,EAAE,MAAI,EAAb;AAAiBa,QAAAA,SAAS,EAAE;AAA5B,OAAd;AACF,KAFD,MAEO;AACJ,WAAKD,QAAL,CAAc;AAACZ,QAAAA,MAAM,EAAE,MAAMO,SAAf;AAA0BN,QAAAA,KAAK,EAAEM,SAAjC;AAA4CM,QAAAA,SAAS,EAAE;AAAvD,OAAd;AACF;AACH;;AAEDC,EAAAA,MAAM,GAAE;AACJ,wBACE;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACM,oBAAC,UAAD;AAAY,MAAA,EAAE,EAAC,QAAf;AAAwB,MAAA,MAAM,EAAE,KAAKf,KAAL,CAAWC,MAA3C;AAAmD,MAAA,KAAK,EAAE;AAACe,QAAAA,eAAe,EAAC;AAAjB,OAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADN,eAEM,oBAAC,aAAD;AAAe,MAAA,KAAK,EAAE9B,KAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,OAAD;AAAS,MAAA,UAAU,EAAE,IAArB;AAA2B,MAAA,KAAK,EAAE5B,KAAlC;AAAyC,MAAA,WAAW,EAAE;AAAC0D,QAAAA,eAAe,EAAC,aAAjB;AAAgC,qBAAa;AAA7C,OAAtD;AAA4G,MAAA,YAAY,EAAE;AAACf,QAAAA,MAAM,EAAGG,MAAM,CAACa,WAAP,GAAqB,KAAKjB,KAAL,CAAWC,MAAhC,GAAyC,EAA1C,GAAgD,KAAKD,KAAL,CAAWE;AAApE,OAA1H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAFN,CADF;AAQH;;AA/B8C","sourcesContent":["import React, {useEffect, useState}from 'react';\nimport './App.css';\nimport ChatBot from 'react-simple-chatbot';\nimport { ThemeProvider } from 'styled-components';\nimport ChatBanner from './ChatBanner';\nimport InfoIcon from '@material-ui/icons/Info';\nimport { FreeBreakfastOutlined, Info } from '@material-ui/icons';\nimport { Typography } from '@material-ui/core';\nimport styles from './Chat.css'; \nimport {RemoveScrollBar} from 'react-remove-scroll-bar';\nimport firebase from 'firebase'\n\nconst COMPANY_NAME = \"Branch\";\n\nvar name = \"\";\n\nvar agentID;\n\nvar db;\n\nfunction Retrival (props) {\n  return (<div>asdf</div>);\n}\n\nfunction Connecting (props) {\n\n  const [working, setWorking] = useState(false);\n\n  const [assignedAgentID, setAssignedAgentID] = useState('');\n\n  useEffect(() => {\n    db = firebase.firestore();\n    const { steps } = props;\n    const name = steps.name.value;\n    //Assign a random agent to this person\n    console.log(name)\n    db.collection('companies').doc(COMPANY_NAME).collection('agents').get()\n    .then(function(querySnapshot) {\n        var agentIDs = [];\n        var agents = [];\n        querySnapshot.forEach(function(doc) {\n            // doc.data() is never undefined for query doc snapshots\n            console.log(doc.id, \" => \", doc.data());\n            agentIDs.push(doc.id);\n            agents.push(doc.data());\n        });\n        \n        //Loop through agents and find the first online\n        for (var i = 0; i < agents.length; i++) {\n          console.log(agents[i][\"online\"])\n          console.log(agentIDs[i])\n          if (agents[i][\"online\"]) {\n            //Select this agent and assign them to this person\n            setAssignedAgentID(agentIDs[i]);\n            agentID = agentIDs[i];\n            break;\n          }\n        }\n\n        props.triggerNextStep({trigger: '7'});\n        //console.log(\"FOUND AGENT: \" + assignedAgentID)\n\n    })\n    .catch(function(error) {\n        console.log(\"Error getting documents: \", error);\n    });\n\n  }, []); \n\n  setTimeout(function () {\n    console.log(agentID)\n  }, 3000)\n\n  return (\n    <div></div>\n  );\n}\n\n\nconst steps = [\n  {\n    id: '1',\n    message: \"Welcome to \" + COMPANY_NAME + \"!\",\n    trigger: '2',\n  },\n  {\n    id: '2',\n    message: 'Would you like to look at our support articles or speak with an agent?',\n    trigger: '3'\n  },\n  {\n    id: '3',\n    options: [\n      { value: 'Articles', label: 'Articles', trigger: '4' },\n      { value: 'Agent', label: 'Agent', trigger: '4' },\n    ],\n  },\n  {\n    id: '4',\n    message: 'Please enter your full name.',\n    trigger: 'name'\n  },\n  {\n    id: 'name',\n    user: true,\n    trigger: '6',\n  },\n  {\n    id: '6',\n    component: <Connecting />,\n    waitAction: true,\n  },\n  {\n    id: '7',\n    message: 'You are now connected with an agent.',\n    trigger: 'retrieval'\n  },\n  {\n    id: 'retrieval',\n    component: <Retrival/>,\n    user: true,\n    waitAction: true,\n  }\n]\n\n\n\nconst theme = {\n  background: '#f5f8fb',\n  fontFamily: 'Helvetica Neue',\n  headerBgColor: '#000000',\n  headerFontColor: '#fff',\n  headerFontSize: '15px',\n  botBubbleColor: '#EF6C00',\n  botFontColor: '#fff',\n  userBubbleColor: '#fff',\n  userFontColor: '#4a4a4a',\n};\n\nvar isScrolling;\n\nexport default class Chat extends React.Component{\n  constructor(props) {\n    super(props);\n    this.state = {height: 225, yDiff: 0};\n  }\n  \n  componentDidMount() {\n    window.addEventListener(\"scroll\", this.resizeHeaderOnScroll.bind(this));\n  }\n  \n  resizeHeaderOnScroll() {\n    \n    const distanceY = window.pageYOffset || document.documentElement.scrollTop\n\n    console.log(distanceY);\n     if (distanceY >= 85) {\n        this.setState({height: 225-70, collapsed: true});\n     } else {\n        this.setState({height: 225 - distanceY, yDiff: distanceY, collapsed: false});\n     }\n  }\n\n  render(){\n      return(\n        <div className=\"container1\">\n              <ChatBanner id=\"header\" height={this.state.height} style={{backgroundColor:\"black\",}} />\n              <ThemeProvider theme={theme}>\n                <ChatBot hideHeader={true} steps={steps} customStyle={{backgroundColor:'transparent', 'boxShadow': 'none'}} contentStyle={{height: (window.innerHeight - this.state.height - 50) + this.state.yDiff}} />\n              </ThemeProvider>\n        </div>\n      )\n  }\n\n}"]},"metadata":{},"sourceType":"module"}